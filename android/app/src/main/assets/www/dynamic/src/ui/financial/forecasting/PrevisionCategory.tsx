function module(e,n,t){var i,r,l,o,u,a,c,s,f,d,m,k,p,E,g,v,h,y,b,A,C,D,P,S,x;t.link("@babel/runtime/regenerator",{default:function(e){i=e}},0),t.link("@babel/runtime/helpers/objectSpread2",{default:function(e){r=e}},1),t.link("@babel/runtime/helpers/slicedToArray",{default:function(e){l=e}},2),t.link("react",{default:function(e){o=e},useState:function(e){u=e}},0),t.link("react-intl",{FormattedMessage:function(e){a=e},useIntl:function(e){c=e}},1),t.link("../../../lib/formatNumber",{default:function(e){s=e}},2),t.link("../../components/crm/MaterialTable",{default:function(e){f=e}},3),t.link("../../components/Button",{default:function(e){d=e}},4),t.link("../../forms/AddFormPrevision",{default:function(e){m=e}},5),t.link("@material-ui/core",{Tooltip:function(e){k=e}},6),t.link("@material-ui/core/IconButton",{default:function(e){p=e}},7),t.link("@material-ui/icons/Edit",{default:function(e){E=e}},8),t.link("@visualteams/ui-kit/colors",{default:function(e){g=e}},9),t.link("@material-ui/icons/Delete",{default:function(e){v=e}},10),t.link("meteor/meteor",{Meteor:function(e){h=e}},11),t.link("react-toastify",{toast:function(e){y=e}},12),t.link("material-ui-confirm",{useConfirm:function(e){b=e}},13),t.link("meteor/react-meteor-data",{useTracker:function(e){A=e}},14),t.link("../../../db/financial/expensePrevision",{default:function(e){C=e}},15),t.link("moment",{default:function(e){D=e}},16),t.link("../../../constants/FINANCES",{EnumFrequencyBudget:function(e){P=e}},17),t.link("../../../lib/users/haveRights",{default:function(e){S=e}},18),t.link("../../../constants/ROLES",{ROLES:function(e){x=e}},19);var B=function(e){var n=e.category,t=e.startDate,B=u(null),M=l(B,2),N=M[0],T=M[1],F=c(),_=F.formatMessage,H=F.locale,L=b(),G=A((function(){return C.find({startDate:t,expenseCategoryId:n._id}).fetch()}),[]),I=n.limits.find((function(e){return D.utc(e.startDate).isSame(D.utc(t))}));if(!I)return o.createElement(a,{id:"PrevisionCategory.NoLimitSaved"});var O=[];O.push({title:_({id:"Predictions.title"}),field:"title"}),(null==I?void 0:I.frequency)===P.MONTHLY&&O.push({title:_({id:"Predictions.monthlyAmountHt"}),field:"",render:function(e){return s(e.amount_monthly)}}),(null==I?void 0:I.frequency)!==P.MONTHLY&&O.push({title:_({id:"Predictions.anualAmountHt"}),field:"",render:function(e){return s(e.amount_annual)}}),O.push({field:"actions",title:"Actions"});var q=function(){function e(e){return i.async(function(){function n(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,i.awrap(L());case 2:h.promise("expensesPrevisions.delete",{_id:e}).then((function(){return y.success(_({id:"success"}))})).catch((function(){return y.error(_({id:"error"}))}));case 3:case"end":return n.stop()}}return n}(),null,null,null,Promise)}return e}(),R=function(e){return o.createElement(o.Fragment,null,S(x.MANAGE_BUDGETS)&&o.createElement("div",null,o.createElement(k,{title:_({id:"Actions.Edit"})},o.createElement(p,{onClick:function(){return T(e)},size:"small"},o.createElement(E,null))),o.createElement(k,{title:_({id:"Actions.Delete"})},o.createElement("span",null,o.createElement(p,{onClick:function(){return q(e._id)},size:"small",style:{color:g.danger}},o.createElement(v,null))))))};return o.createElement(o.Fragment,null,N&&o.createElement(m,{categorie:n,startDate:t,model:N,onClose:function(){return T(null)}}),o.createElement(f,{lang:H,columns:O,data:G.map((function(e){return r(r({},e),{},{actions:R(e)})})),components:{Actions:function(){return o.createElement(d,{id:"button-add-prevision-category",color:"secondary",onClick:function(){return T({})},restrictedFeature:x.MANAGE_BUDGETS},o.createElement(a,{id:"PrevisionCategory.Add"}))}},options:{filtering:!1,sorting:!1,paging:!1,exportButton:!1,columnsButton:!1,search:!1,maxBodyHeight:null,draggable:!1,toolbar:!0,padding:"dense"}}))};t.exportDefault(B)}

