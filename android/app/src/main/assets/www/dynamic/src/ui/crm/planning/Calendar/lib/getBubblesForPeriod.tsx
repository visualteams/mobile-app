function module(e,t,n){var a,r,i,o,l,c,d,f,u,s,m,k,y,h,g,p,b,D,v,E;n.link("@babel/runtime/helpers/toConsumableArray",{default:function(e){a=e}},0),n.link("react",{default:function(e){r=e}},0),n.link("moment",{default:function(e){i=e}},1),n.link("date-fns",{isBefore:function(e){o=e}},2),n.link("react-intl",{FormattedMessage:function(e){l=e},useIntl:function(e){c=e}},3),n.link("@material-ui/core/Tooltip",{default:function(e){d=e}},4),n.link("../../../../../db/crm/goals",{default:function(e){f=e}},5),n.link("../../../../../db/crm/reports/collection_client",{default:function(e){u=e}},6),n.link("../../../../../db/crm/projects",{default:function(e){s=e}},7),n.link("../../../../../db/teams/holidays",{default:function(e){m=e}},8),n.link("../../../../../db/crm/customers",{default:function(e){k=e}},9),n.link("../../../../../lib/getTimeReported",{default:function(e){y=e}},10),n.link("../../../../../lib/time",{secondsToHms:function(e){h=e}},11),n.link("../Calendar",{factorWeek:function(e){g=e},factorMonth:function(e){p=e},widthCellDay:function(e){b=e},heightCellDay:function(e){D=e},view:function(e){v=e}},12),n.link("../../../../App",{startDateCalendar:function(e){E=e}},13);var O=function(e){var t=e.goalsByUser,n=e.user,O=e.startDate,w,j=c().formatMessage,I;return{data:Object.keys(t[n._id]).map((function(e){var t=i.utc(O).add(e,v.get()),c=f.find({endDate:{$gte:t.startOf("week"===v.get()?"isoWeek":"month").toDate()},startDate:{$lte:t.endOf("week"===v.get()?"isoWeek":"month").toDate()},usersId:n._id}).fetch(),w=u.find({date:{$gte:t.startOf("week"===v.get()?"isoWeek":"month").toDate(),$lte:t.endOf("week"===v.get()?"isoWeek":"month").toDate()},createdBy:n._id}).fetch(),I=m.find({endDate:{$gte:t.startOf("week"===v.get()?"isoWeek":"month").toDate()},startDate:{$lte:t.endOf("week"===v.get()?"isoWeek":"month").toDate()},createdBy:n._id}).fetch(),W={},x={},C=0,T=0;c.forEach((function(e){if(!o(e.startDate,new Date)){W[e.projectId]||(W[e.projectId]=0);var t=i.utc(e.endDate).endOf("day").diff(i.utc(e.startDate).startOf("day"),"day"),n=e.estimatedTime*(t+1);W[e.projectId]+=n,C+=n}})),w.forEach((function(e){x[e.projectId]||(x[e.projectId]=0);var t=y(e);x[e.projectId]+=t,T+=t})),I.forEach((function(e){x.holidays||(x.holidays=0);var t,n=25200*(i.utc(e.endDate).endOf("day").diff(i.utc(e.startDate).startOf("day"),"day")+1);x.holidays+=n,T+=n}));var $={},M="week"===v.get()?126e3:543600,_;Array.from(new Set([].concat(a(Object.keys(W)),a(Object.keys(x))))).forEach((function(e){var t=C>T?C:T,n=W[e]>x[e]||!x[e]?Number(W[e]):Number(x[e]);$[e]=100*n/(t>M?t:M)}));var B=i.utc(t.startOf("week"===v.get()?"isoWeek":"month")).diff(E.get(),v.get()),A="week"===v.get()?g:p,z=function(e,t){return $[e]>$[t]?-1:$[t]>$[e]?1:0};return r.createElement(r.Fragment,{key:e},r.createElement("div",{style:{position:"absolute",transform:"translate("+B*b*A+"px, 0px)"}},Object.keys($).sort(z).map((function(e){var t=x[e]>0,n=function(n){return r.createElement("div",{style:{display:"inline-block",width:$[e]*(b*A)/100,height:D,backgroundColor:n,opacity:t?1:.5}})};if("holidays"===e)return r.createElement(d,{title:r.createElement("div",null,r.createElement("div",{style:{textTransform:"capitalize"}},j({id:"holidays"})),r.createElement("div",null,h(x[e])," (",Math.round($[e]),"%)"))},n("black"));var a=s.findOne(e),i=k.findOne(a.customerId);return r.createElement(d,{key:e,title:r.createElement("div",null,r.createElement("div",{style:{textTransform:"capitalize"}},t?r.createElement(l,{id:"reports"}):r.createElement(l,{id:"goals"})),r.createElement("br",null),r.createElement("b",null,i.name)," -"," ",h(t?x[e]:W[e])," (",Math.round($[e]),"%)",r.createElement("br",null),a.name)},n(a.color))}))))})),maxItemsperRow:1}};n.exportDefault(O)}

