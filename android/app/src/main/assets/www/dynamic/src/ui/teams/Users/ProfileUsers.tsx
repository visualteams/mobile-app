function module(e,n,t){var r,o,l,i,a,s,u,c,m,d,f,p,P,w,b,E,k,v,h,g,x,U,S,M,y;t.link("@babel/runtime/regenerator",{default:function(e){r=e}},0),t.link("@babel/runtime/helpers/extends",{default:function(e){o=e}},1),t.link("@babel/runtime/helpers/objectSpread2",{default:function(e){l=e}},2),t.link("@babel/runtime/helpers/slicedToArray",{default:function(e){i=e}},3),t.link("react",{default:function(e){a=e},useEffect:function(e){s=e},useState:function(e){u=e}},0),t.link("uniforms-material",{AutoField:function(e){c=e},AutoForm:function(e){m=e}},1),t.link("simpl-schema",{default:function(e){d=e}},2),t.link("meteor/accounts-base",{Accounts:function(e){f=e}},3),t.link("react-intl",{FormattedMessage:function(e){p=e},useIntl:function(e){P=e}},4),t.link("react-toastify",{toast:function(e){w=e}},5),t.link("meteor/meteor",{Meteor:function(e){b=e}},6),t.link("uniforms-bridge-simple-schema-2",{SimpleSchema2Bridge:function(e){E=e}},7),t.link("@material-ui/core/Divider",{default:function(e){k=e}},8),t.link("@material-ui/core/Grid/Grid",{default:function(e){v=e}},9),t.link("../../../db/teams/users/schema",{default:function(e){h=e}},10),t.link("../../components/modules/uniforms/material/Password",{default:function(e){g=e}},11),t.link("../../components/modules/uniforms/material/FileFieldLocal",{default:function(e){x=e}},12),t.link("../../components/AddForm",{default:function(e){U=e}},13),t.link("@visualteams/plugin-engine/definitions/hooks",{Hooks:function(e){S=e}},14),t.link("../../settings/plugins/DisplayHooks",{default:function(e){M=e}},15),t.link("../../components/DisplayHookWrapper",{default:function(e){y=e}},16);var A=function(){var e,n,t=u({}),A=i(t,2),R=A[0],C=A[1],D,F=P().formatMessage;s((function(){_()}),[]);var _=function(){C(b.user())},H=l(l({},R),{},{email:null==R||null===(e=R.emails)||void 0===e||null===(n=e[0])||void 0===n?void 0:n.address});if(!H)return null;var N=function(){function e(e){return r.async(function(){function n(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r.awrap(b.promise("users.profile.update",e).then((function(){return w.success(F({id:"success"}))})).catch((function(){return w.error(F({id:"error"}))})).finally((function(){return _()})));case 2:case"end":return n.stop()}}return n}(),null,null,null,Promise)}return e}(),O=function(){function e(e){return r.async(function(){function n(n){for(;;)switch(n.prev=n.next){case 0:if(!e.newPassword||!e.oldPassword||""===e.newPassword||""===e.oldPassword||""===e.confirmNewPassword||e.newPassword===e.confirmNewPassword){n.next=4;break}w.error("ERROR_PASSWORD_MISMATCH"),n.next=7;break;case 4:if(!e.newPassword||!e.oldPassword||""===e.newPassword||""===e.oldPassword){n.next=7;break}return n.next=7,r.awrap(f.changePassword(e.oldPassword,e.newPassword,(function(e){e?w.error("ERROR_PASSWORD"):w.success(F({id:"ProfileUsers.passwordChanged"}))})));case 7:case"end":return n.stop()}}return n}(),null,null,null,Promise)}return e}(),W=new d({oldPassword:{label:F({id:"ProfileUsers.OldPassword"}),type:String,optional:!0,uniforms:{component:g}},newPassword:{label:F({id:"ProfileUsers.NewPassword"}),type:String,optional:!0,uniforms:{component:g}},confirmNewPassword:{label:F({id:"ProfileUsers.ConfirmPassword"}),type:String,optional:!0,uniforms:{component:g}}}),I=h.omit("services","username","createdAt").extend({"profile.avatarUrl":{type:String,uniforms:{component:function(e){return a.createElement(x,o({},e,{maxWidth:128,maxHeight:128,placeholderImg:"/images/noavatar.jpg"}))}}}}),L=a.createElement(m,{model:H,schema:new E(I),onSubmit:N},a.createElement(v,{container:!0,spacing:2},a.createElement(v,{item:!0,xs:12,sm:6},a.createElement(c,{label:F({id:"ProfileUsers.firstname"}),name:"profile.firstname"})),a.createElement(v,{item:!0,xs:12,sm:6},a.createElement(c,{label:F({id:"ProfileUsers.lastname"}),name:"profile.lastname"}))),a.createElement(c,{label:F({id:"ProfileUsers.email"}),name:"email",disabled:!0}),a.createElement(c,{label:F({id:"ProfileUsers.phone"}),name:"profile.phone"}),a.createElement(c,{label:F({id:"ProfileUsers.avatarUrl"}),name:"profile.avatarUrl"}),a.createElement("br",null),a.createElement(k,null),a.createElement("br",null),a.createElement(c,{label:F({id:"ProfileUsers.locale"}),name:"profile.locale"}),a.createElement("br",null),a.createElement(k,null),a.createElement("br",null),a.createElement(c,{label:F({id:"ProfileUsers.videoMode"}),name:"profile.videoMode",helperText:a.createElement(p,{id:"ProfileUsers.videoMode_note"}),options:[{value:"external",label:a.createElement(p,{id:"ProfileUsers.videoMode_external"})},{value:"internal",label:a.createElement(p,{id:"ProfileUsers.videoMode_internal"})}]})),T=a.createElement(m,{model:{},schema:new E(W),onSubmit:O});return a.createElement(v,{container:!0,spacing:4},a.createElement(v,{item:!0,xs:12,md:6},a.createElement(U,{form:L,onSubmit:N,popupMode:!1,title:F({id:"Menu.MyProfil"}),buttonConfirmLabel:F({id:"Actions.save"})})),a.createElement(v,{item:!0,xs:12,md:6},a.createElement(U,{form:T,onSubmit:N,popupMode:!1,title:F({id:"ProfileUsers.Password"}),buttonConfirmLabel:F({id:"Actions.save"})})),a.createElement(v,{item:!0,xs:12},a.createElement(M,{hookName:S.ProfileUser,wrapperComponent:y})))};t.exportDefault(A)}

