function module(n,e,t){var r,i,u,a,l,o,c,s,f,m,d,p,k,v,g,E,y,b,h,N,x,I;t.link("@babel/runtime/regenerator",{default:function(n){r=n}},0),t.link("@babel/runtime/helpers/objectSpread2",{default:function(n){i=n}},1),t.link("@babel/runtime/helpers/slicedToArray",{default:function(n){u=n}},2),t.link("react",{default:function(n){a=n},useEffect:function(n){l=n},useState:function(n){o=n}},0),t.link("axios",{default:function(n){c=n}},1),t.link("semver-max",{default:function(n){s=n}},2),t.link("react-router-dom",{useHistory:function(n){f=n}},3),t.link("react-toastify",{toast:function(n){m=n}},4),t.link("material-ui-confirm",{useConfirm:function(n){d=n}},5),t.link("react-intl",{FormattedMessage:function(n){p=n},useIntl:function(n){k=n}},6),t.link("meteor/meteor",{Meteor:function(n){v=n}},7),t.link("@material-ui/core/Grid/Grid",{default:function(n){g=n}},8),t.link("@material-ui/core/Card",{default:function(n){E=n}},9),t.link("@material-ui/core/styles/makeStyles",{default:function(n){y=n}},10),t.link("@material-ui/icons/ArrowBack",{default:function(n){b=n}},11),t.link("../../../components/Button",{default:function(n){h=n}},12),t.link("./HeaderPlugin",{default:function(n){N=n}},13),t.link("./PagePlugin",{default:function(n){x=n}},14),t.link("../../../components/MainLoader",{default:function(n){I=n}},15);var M=y({buttonContainer:{margin:4,display:"flex",justifyContent:"space-between"}}),C=function(n,e){for(var t=n.split("."),r=e.split("."),i=0;i<3;i++){var u=Number(t[i]),a=Number(r[i]);if(u>a)return 1;if(a>u)return-1;if(!isNaN(u)&&isNaN(a))return 1;if(isNaN(u)&&!isNaN(a))return-1}return 0},w=function(){var n=o([]),e=u(n,2),t=e[0],y=e[1],w=o(null),P=u(w,2),A=P[0],B=P[1],S=o(!0),T=u(S,2),j=T[0],G=T[1],H=o(!1),D=u(H,2),F=D[0],L=D[1],O=f(),U=M(),q=d(),z,J=k().formatMessage;l((function(){K()}),[]);var K=function(){G(!0),c.get("https://api-marketplace.visualteams.fr/plugins").then(function(){function n(n){var e;return r.async(function(){function t(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.awrap(Q());case 2:e=t.sent,y(n.data.map((function(n){var t;return i(i({},n),{},{isInstalled:null===(t=e.find((function(e){return e.name===n.name})))||void 0===t?void 0:t.version})}))),G(!1);case 5:case"end":return t.stop()}}return t}(),null,null,null,Promise)}return n}())},Q=function(){function n(){return r.async(function(){function n(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",v.promise("plugins.list"));case 1:case"end":return n.stop()}}return n}(),null,null,null,Promise)}return n}(),R=function(){function n(n,e){return r.async(function(){function t(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",q({confirmationText:J({id:"Actions.Ok"})}).then((function(){return L(!0),v.promise("plugins.install",{name:n.name,url:e.url}).then((function(){m.success(n.name+" v"+e.version+" was successfully installed")})).catch((function(){return m.error(J({id:"error"}))})).finally((function(){return L(!1)}))})));case 1:case"end":return t.stop()}}return t}(),null,null,null,Promise)}return n}(),V=function(n){var e=n.versions.map((function(n){return n.version})).reduce(s);return n.versions.find((function(n){return n.version===e}))},W=function(n){return!n.isInstalled},X=function(n){return!!n.isInstalled&&-1===C(n.isInstalled,V(n).version)},Y=function(n){return W(n)?J({id:"Marketplace.Install"}):X(n)?J({id:"Marketplace.Update"}):J({id:"Marketplace.AlreadyInstalled"})},Z=function(n){var e=n.plugin;return a.createElement(h,{color:"primary",onClick:function(){return R(e,V(e))},disabled:!W(e)&&!X(e)},Y(e))};return j?a.createElement(I,null):F?a.createElement(I,{message:J({id:"Marketplace.InstallInProgresse"})}):a.createElement("div",null,A&&a.createElement(x,{plugin:A,version:V(A),onClose:function(){return B(null)},installButton:a.createElement(Z,{plugin:A})}),a.createElement(h,{variant:"outlined",onClick:function(){return O.push("/settings/application")}},a.createElement(b,null)," ",a.createElement(p,{id:"Marketplace.Back"})),a.createElement(g,{container:!0,spacing:4,style:{marginTop:24}},t.map((function(n){return a.createElement(g,{item:!0,key:n.id,xs:3},a.createElement(E,null,a.createElement(N,{plugin:n}),a.createElement("div",{className:U.buttonContainer},a.createElement(h,{color:"secondary",onClick:function(){return B(n)}},a.createElement(p,{id:"Marketplace.moreInfo"})),a.createElement(Z,{plugin:n}))))}))))};t.exportDefault(w)}

