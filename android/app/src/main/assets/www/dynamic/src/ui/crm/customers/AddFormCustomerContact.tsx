function module(e,t,n){var o,r,a,i,m,s,c,l,u,d,f,p,C;n.link("@babel/runtime/helpers/objectSpread2",{default:function(e){o=e}},0),n.link("react",{default:function(e){r=e}},0),n.link("uniforms-material",{AutoField:function(e){a=e},AutoForm:function(e){i=e}},1),n.link("react-intl",{useIntl:function(e){m=e}},2),n.link("meteor/meteor",{Meteor:function(e){s=e}},3),n.link("react-toastify",{toast:function(e){c=e}},4),n.link("@material-ui/core",{Grid:function(e){l=e}},5),n.link("../../components/AddForm",{default:function(e){u=e}},6),n.link("../../../db/crm/customerContact/schema",{default:function(e){d=e}},7),n.link("uniforms-bridge-simple-schema-2",{SimpleSchema2Bridge:function(e){f=e}},8),n.link("../../../db/groupsPermissions",{default:function(e){p=e}},9),n.link("uniforms",{useForm:function(e){C=e}},10);var E=function(){var e=C(),t,n=m().formatMessage;return r.createElement("div",null,r.createElement(a,{label:n({id:"AddFormCustomerContact.haveExternalAccess"}),name:"haveExternalAccess"}),e.model.haveExternalAccess&&r.createElement(a,{label:n({id:"AddFormCustomerContact.group",defaultMessage:"Groupe de permissions"}),name:"groupPermissionId"}))},A=function(e){var t=e.onClose,n=e.model,C=e.customerId,A,b=m().formatMessage,g=function(e){if(e.haveExternalAccess&&!e.groupPermissionId)throw c.error(b({id:"AddFormCustomerContact.errorgroup",defaultMessage:"Vous devez s√©lectionner un groupe de permissions pour ce contact"})),new Error;try{n._id?s.promise("customerContact.update",{_id:n._id},o({},e)):s.promise("customerContact.create",o(o({},e),{},{customerId:C})),t(),c.success(b({id:"success"}))}catch(r){console.error(r),c.error(b({id:"error"}))}},h=d.omit("customerId").extend({haveExternalAccess:{type:Boolean,optional:!0}});h=h.extend({groupPermissionId:{type:String,optional:!0,uniforms:{options:p.find({type:"external"}).fetch().map((function(e){return{value:e._id,label:e.name}}))}}});var v=r.createElement(i,{schema:new f(h),model:n},r.createElement(l,{container:!0,spacing:2},r.createElement(l,{item:!0,xs:12,sm:6},r.createElement(a,{label:b({id:"AddFormCustomerContact.firstname"}),name:"firstname"})),r.createElement(l,{item:!0,xs:12,sm:6},r.createElement(a,{label:b({id:"AddFormCustomerContact.lastname"}),name:"lastname"}))),r.createElement(a,{label:b({id:"AddFormCustomerContact.email"}),name:"email"}),r.createElement(a,{label:b({id:"AddFormCustomerContact.phone"}),name:"phone"}),r.createElement(E,null));return r.createElement(u,{form:v,onSubmit:g,onClose:t,buttonConfirmLabel:n._id?b({id:"Actions.Edit"}):b({id:"Actions.Add"}),title:b({id:"AddFormCustomerContact.title"})})};n.exportDefault(A)}

