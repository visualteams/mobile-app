function module(t,e,n){var a,o,u,i,l,r,c,d,s,f,m,p,Y,E,A,x,M,y,D,v,T,g,h,b,C,k;n.link("@babel/runtime/helpers/toConsumableArray",{default:function(t){a=t}},0),n.link("@babel/runtime/helpers/objectSpread2",{default:function(t){o=t}},1),n.link("@babel/runtime/helpers/slicedToArray",{default:function(t){u=t}},2),n.link("react",{default:function(t){i=t},useState:function(t){l=t}},0),n.link("moment",{default:function(t){r=t}},1),n.link("meteor/react-meteor-data",{useTracker:function(t){c=t},withTracker:function(t){d=t}},2),n.link("react-intl",{useIntl:function(t){s=t}},3),n.link("@material-ui/lab/Alert",{default:function(t){f=t}},4),n.link("@material-ui/core/Tooltip",{default:function(t){m=t}},5),n.link("../../lib/formatNumber",{default:function(t){p=t}},6),n.link("../components/MainLoader",{default:function(t){Y=t}},7),n.link("./budget/Expenses",{default:function(t){E=t}},8),n.link("./budget/DashboardWorkflow",{default:function(t){A=t}},9),n.link("./budget/ExpensesDetailAccountingCode",{default:function(t){x=t}},10),n.link("../components/TableStat/DateStat",{default:function(t){M=t}},11),n.link("../../lib/hooks/useDatePredefined",{default:function(t){y=t}},12),n.link("../../lib/hooks/useDateExercice",{default:function(t){D=t}},13),n.link("../../constants/FINANCES",{EnumDocument:function(t){v=t},FINANCES:function(t){T=t}},14),n.link("../components/TabbarPage",{default:function(t){g=t}},15),n.link("../../db/financial/expenseCategory",{default:function(t){h=t}},16),n.link("../../db/financial/accountingCode/collection",{default:function(t){b=t}},17),n.link("../../db/financial/documents/collection",{default:function(t){C=t}},18),n.link("../../lib/financial/getCalcPaymentDocuments",{default:function(t){k=t}},19);var P=function(t){return p(t)},S=function(t){var e=t.getListAccountingCode,n=t.financialDocuments,c=t.expenseCategory,d=t.startDateData,p,D=s().formatMessage,T=y("exercice"),h=T.dateStartInit,b=T.dateEndInit,C=l(h),S=u(C,2),N=S[0],I=S[1],F=l(b),B=u(F,2),L=B[0],R=B[1],w=l(0),j=u(w,2),K=j[0],U=j[1],G=l(!1),H=u(G,2),$=H[0],_=H[1];if(null===e)return i.createElement(Y,null);for(var q=0,O=[],V=[],W=[],z=[],J=[],Q=[],X=[],Z=0,tt=0,et=0,nt=0,at=0,ot=0,ut=0,it=[],lt=[],rt=0,ct=0,dt=0,st=0,ft=0,mt=0,pt=[],Yt=[],Et=e.map((function(t){var e;return o(o({},t),{},{categoryName:(null==c||null===(e=c.find((function(e){return e._id===t.categoryId})))||void 0===e?void 0:e.name)||D({id:"ExpenseTable.unplanned"})})})),At=[].concat(a(Et.filter((function(t){return!(null!=t&&t.excludeCA||null!=t&&t.sales)}))),[{code:0,sales:!1}]),xt=[].concat(a(Et.filter((function(t){return!(null==t||!t.excludeCA||null!=t&&t.sales)}))),[{code:0,sales:!1}]),Mt=r.utc(N).add(1,"day"),yt=function(){var t=Mt.format("YYYY-MM");pt.push({title:Mt.format("MM-YYYY"),field:t,type:"currency",currencySetting:{minimumFractionDigits:0,locale:"fr",currencyCode:"EUR"},render:function(e){if(0!==e[t])return e[t+"-tooltip"]?i.createElement("div",{style:{justifyContent:"center",display:"flex"}},i.createElement(m,{title:i.createElement(i.Fragment,null,e[t+"-tooltip"].map((function(t,e){return i.createElement("div",{key:e},t)})))},i.createElement("div",{className:"have-tooltip"},P(e[t])))):P(e[t])}}),Mt.add(1,"month")};Mt.isBefore(L);)yt();for(var Dt=r.utc(d),vt=function(){var t=Dt.format("YYYY-MM");Yt.push({title:Dt.format("MM-YYYY"),field:t,type:"currency",currencySetting:{minimumFractionDigits:0,locale:"fr",currencyCode:"EUR"},render:function(e){if(0!==e[t])return e[t+"-tooltip"]?i.createElement("div",{style:{justifyContent:"center",display:"flex"}},i.createElement(m,{title:i.createElement(i.Fragment,null,e[t+"-tooltip"].map((function(t,e){return i.createElement("div",{key:e},t)})))},i.createElement("div",{className:"have-tooltip"},P(e[t])))):P(e[t])}}),Dt.add(1,"month")};Dt.isBefore(L);)vt();for(var Tt=r.utc(d);Tt.isBefore(r.utc().add(1,"year").toDate());)Q[Tt.format("YYYY-MM")]=[],X[Tt.format("YYYY-MM")]=[],Tt.add(1,"month");Q["2030-12"]=[],X["2030-12"]=[];for(var gt=r.utc(N);gt.isBefore(r.utc().add(1,"year").toDate());)O[gt.format("YYYY-MM")]=[],V[gt.format("YYYY-MM")]=[],At.forEach((function(t){W[t.code]||(W[t.code]=[]),W[t.code][gt.format("YYYY-MM")]=[]})),xt.forEach((function(t){z[t.code]||(z[t.code]=[]),z[t.code][gt.format("YYYY-MM")]=[]})),gt.add(1,"month");var ht=function(t){var e=r.utc(t).format("YYYYMMDD")<=r.utc(L).format("YYYYMMDD")&&r.utc(t).format("YYYYMMDD")>=r.utc(N).format("YYYYMMDD"),n=r.utc(t).format("YYYY-MM"),a;return{displayCaExercice:e,displayCalculTresorerieByDateDocument:!!t&&r.utc(t).format("YYYYMMDD")<=r.utc(L).format("YYYYMMDD")&&r.utc(t).format("YYYYMMDD")>=r.utc(d).format("YYYYMMDD"),dateCaKey:n}};return n.forEach((function(t){var e=ht(t.documentDate),n=e.displayCaExercice,a=e.dateCaKey,u=e.displayCalculTresorerieByDateDocument,i=k(t,$,L,d,N);if(i.arrayPayment.forEach((function(t){t.totalAmountPaid>0?X[t.dateKey].push(t):t.totalAmountPaid<0&&Q[t.dateKey].push(t),t.documentPaid&&(t.totalAmountPaid>0?at+=t.totalAmountPaid:nt+=-t.totalAmountPaid,t.documentPaidExercice&&(t.totalAmountPaid>0?ut+=t.totalAmountPaid:ot+=-t.totalAmountPaid))})),u){var l=parseFloat(i.totalAmount)-parseFloat(i.totalAmountPaid);0!==l&&Math.abs(l)>.01&&(i.totalAmount>0?(ct+=l,it.push(o(o({},i),{},{outstandingAmount:l}))):i.totalAmount<0&&(rt+=l,lt.push(o(o({},i),{},{outstandingAmount:l}))))}n&&(i.taxAmountPaid>0?dt+=i.taxAmountPaid:et+=-i.taxAmountPaid),t.documentType===v.SALE&&n&&O[a].push(o({},t)),t.details.forEach((function(e){var i=Et.find((function(t){return String(t.code)===String(e.accountingCode)})),l=i?e.accountingCode:0;i||0===l||void 0!==J.find((function(t){return t===l}))||J.push(l),n&&t.documentType===v.PURCHASE&&(null!=i&&i.excludeCA?z[l][a].push(o(o({},e),{},{preTaxAmount:-e.preTaxAmount})):(W[l][a].push(o(o({},e),{},{preTaxAmount:-e.preTaxAmount})),V[a].push(o(o({},e),{},{preTaxAmount:-e.preTaxAmount}))),Z+=null!=i&&i.tva&&u?-parseFloat(e.totalAmount):0),u&&(ft+=null!=i&&i.capital?parseFloat(e.totalAmount):0,st+=null!=i&&i.placement?parseFloat(t.documentType===v.PURCHASE?-e.totalAmount:e.totalAmount):0,null!=i&&i.emprunt&&(tt+=e.totalAmount<0?-parseFloat(e.totalAmount):0,mt+=e.totalAmount>0?parseFloat(e.totalAmount):0))}))})),i.createElement(i.Fragment,null,i.createElement("div",{style:{display:"flex",width:"100%",justifyContent:"space-between"}},i.createElement(M,{dateEndInit:b,dateStartInit:h,dateStart:N,setDateStart:I,dateEnd:L,setDateEnd:R,duration:"exercice"})),J.length>0&&i.createElement("div",null,i.createElement(f,{severity:"error"},"Code(s) comptable(s) manquant(s) :",i.createElement("ul",null,J.map((function(t){return i.createElement("li",{key:t},t)}))))),i.createElement(g,{pages:[{label:D({id:"Budgets.Cashflow"}),content:i.createElement(A,{columns:Yt,precision:K,setPrecision:U,amountTotalInvoiceGlobalTTC:at,amountTotalExpenseGlobalTTC:nt,amountTotalInvoiceExerciceTTC:ut,amountTotalExpenseExerciceTTC:ot,outstandingExpenseAmount:rt,outstandingInvoicesAmount:ct,outstandingInvoicesListToolip:it,outstandingExpensesListToolip:lt,totalTaxAmountInvoice:dt,totalTaxAmountExpense:et,totalTVAPaid:Z,credit:mt,creditRefund:tt,dateStart:N,startDateData:d,dateEnd:L,tresorerieMensuelInvoices:X,tresorerieMensuelExpenses:Q,placement:st,capital:ft,repartitionM1:$,setrepartitionM1:_,formatNumber:P})},{label:D({id:"Budgets.Result"}),content:i.createElement(E,{columns:pt,chiffreAffaireMensuelInvoices:O,chiffreAffaireMensuelExpenses:V})},{label:D({id:"Budgets.ExpensesNatures"}),content:i.createElement(x,{expenseNatures:At,columns:pt,chiffreAffaireMensuelExpensesNatures:W})},{label:D({id:"Budgets.ExpensesOther"}),content:i.createElement(x,{expenseNatures:xt,columns:pt,chiffreAffaireMensuelExpensesNatures:z})}]}))};n.exportDefault(d((function(){var t,e=D().yearStartExercice,n=r.utc(e+"-01-01 00:00:00").toDate(),a=r.utc(T.DATE_END+" 23:59:59").toDate(),u=c((function(){return h.find().fetch()}),[]),i,l,d;return{getListAccountingCode:b.find().fetch(),financialDocuments:C.find({documentDate:{$gte:n,$lte:a}}).fetch().map((function(t){return o(o({},t),{},{preTaxAmount:void 0===(null==t?void 0:t.preTaxAmount)?t.totalAmount:t.preTaxAmount,details:t.details.map((function(e){return o(o({},e),{},{description:(null==e?void 0:e.description)||(null==t?void 0:t.title)||(null==e?void 0:e.tiersName)||(null==t?void 0:t.tiersName)||"",preTaxAmount:void 0===(null==e?void 0:e.preTaxAmount)?e.totalAmount:e.preTaxAmount})}))})})),expenseCategory:u,startDateData:n}}))(S))}

