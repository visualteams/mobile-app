function module(e,n,t){var r,i,l,a,o,u,c,s,d,f,m,g,p,E,k,b,x,y,v,C,A,B,h,D,S,F,P,_,M;t.link("@babel/runtime/regenerator",{default:function(e){r=e}},0),t.link("@babel/runtime/helpers/objectSpread2",{default:function(e){i=e}},1),t.link("@babel/runtime/helpers/slicedToArray",{default:function(e){l=e}},2),t.link("react",{default:function(e){a=e},useState:function(e){o=e}},0),t.link("react-intl",{FormattedMessage:function(e){u=e},useIntl:function(e){c=e}},1),t.link("meteor/meteor",{Meteor:function(e){s=e}},2),t.link("react-toastify",{toast:function(e){d=e}},3),t.link("material-ui-confirm",{useConfirm:function(e){f=e}},4),t.link("@material-ui/core/LinearProgress",{default:function(e){m=e}},5),t.link("@material-ui/core/styles/makeStyles",{default:function(e){g=e}},6),t.link("@material-ui/icons/MonetizationOn",{default:function(e){p=e}},7),t.link("@material-ui/icons/Edit",{default:function(e){E=e}},8),t.link("@material-ui/core/IconButton",{default:function(e){k=e}},9),t.link("@material-ui/icons/Delete",{default:function(e){b=e}},10),t.link("@material-ui/core",{Dialog:function(e){x=e},Tooltip:function(e){y=e}},11),t.link("../AddFormExpenseCategory",{default:function(e){v=e}},12),t.link("./PrevisionCategory",{default:function(e){C=e}},13),t.link("../../components/crm/MaterialTable",{default:function(e){A=e}},14),t.link("@visualteams/ui-kit/colors",{default:function(e){B=e}},15),t.link("../../../lib/formatNumber",{default:function(e){h=e}},16),t.link("../../../lib/sumByField",{default:function(e){D=e}},17),t.link("./ExpensesCategory",{default:function(e){S=e}},18),t.link("../../components/Button",{default:function(e){F=e}},19),t.link("../../components/ExplainTerms",{default:function(e){P=e}},20),t.link("../../../lib/users/haveRights",{default:function(e){_=e}},21),t.link("../../../constants/ROLES",{ROLES:function(e){M=e}},22);var w=g({root:{padding:16},icon:{cursor:"pointer",position:"relative",top:4},balanceNegative:{color:B.danger}}),N=function(e){var n=e.startDate,t=e.calcCategories,g=o(null),N=l(g,2),T=N[0],z=N[1],I=o(null),G=l(I,2),L=G[0],O=G[1],R,H=c().formatMessage,U=w(),W=f(),j=[{title:H({id:"ExpenseProgress.Category"}),field:"name",disableFooter:!0},{title:a.createElement(P,{title:H({id:"ExpenseProgress.BudgetAllocated"}),tooltip:H({id:"ExpenseProgress.BudgetAllocatedHelp"})}),field:"budgetAllocated",render:function(e){return a.createElement("div",null,h(e.budgetForcasting)," / ",h(e.budgetAllocated))},customSum:function(e){return a.createElement("div",null,h(D(e,"budgetForcasting"))," /"," ",h(D(e,"budgetAllocated")))}},{title:H({id:"ExpenseProgress.alreadyDoneExpenses"}),field:"expenseAlreadyDone",render:function(e){return h(e.expenseAlreadyDone)},customSum:function(e){return h(D(e,"expenseAlreadyDone"))}},{title:H({id:"ExpenseProgress.expensesForcasting"}),field:"expensesForcasting",render:function(e){return h(e.expensesForcasting)},customSum:function(e){return h(D(e,"expensesForcasting"))}},{title:H({id:"ExpenseProgress.BudgetBalance"}),field:"balance",render:function(e){return e.balance>=0?h(e.balance):a.createElement("span",{className:U.balanceNegative},h(e.balance))},customSum:function(e){return h(D(e,"balance"))}},{title:H({id:"ExpenseProgress.BudgetAdvancement"}),field:"advancement",render:function(e){return e.pourcentage>0||e.pourcentageBuffer>0?a.createElement(m,{variant:"buffer",color:e.pourcentage>100||e.pourcentageBuffer>100?"secondary":"primary",value:e.pourcentage>100?100:e.pourcentage,valueBuffer:e.pourcentageBuffer>100?100:e.pourcentageBuffer}):""},disableFooter:!0},{field:"actions",title:"Actions",sorting:!1,align:"right"}],q=function(e){return z(e)},J=function(){function e(e){return r.async(function(){function n(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r.awrap(W());case 2:s.promise("expensesCategories.delete",{_id:e}).then((function(){return d.success(H({id:"success"}))})).catch((function(){return d.error(H({id:"error"}))}));case 3:case"end":return n.stop()}}return n}(),null,null,null,Promise)}return e}(),K=function(e){return a.createElement("div",null,a.createElement(y,{title:a.createElement(u,{id:"ExpenseCategoryCharts.ShowExpenses"})},a.createElement(k,{onClick:function(){return O(e.expensesDetail)},size:"small"},a.createElement(p,null))),"unplanned"!==e._id&&_(M.MANAGE_BUDGETS)&&a.createElement(a.Fragment,null,a.createElement(y,{title:H({id:"Actions.Edit"})},a.createElement(k,{onClick:function(){return q(e)},size:"small"},a.createElement(E,null))),a.createElement(y,{title:H({id:"Actions.Delete"})},a.createElement("span",null,a.createElement(k,{onClick:function(){return J(e._id)},size:"small",style:{color:B.danger}},a.createElement(b,null))))))};return a.createElement(a.Fragment,null,!!T&&a.createElement(v,{model:T,onClose:function(){return z(null)},startDate:n}),L&&a.createElement(x,{open:L,onClose:function(){return O(null)},fullWidth:!0,maxWidth:"lg"},a.createElement(S,{expenses:L})),a.createElement(A,{columns:j,data:t.map((function(e){return i(i({},e),{},{actions:K(e)})})),parentChildData:function(e,n){return n.find((function(n){return!(null==n||!n._id||null==e||!e.parentId||n._id!==e.parentId)}))},detailPanel:[{tooltip:H({id:"ExpensesCategoryCharts.ShowSubCat"}),render:function(e){var t=e.rowData;return"unplanned"!==t._id&&a.createElement("div",{style:{padding:32,backgroundColor:B.background}},a.createElement(C,{key:t._id,category:t,startDate:n}))}}],components:{Actions:function(){return a.createElement(F,{id:"button-add-budgets",size:"large",onClick:function(){return z({name:""})},restrictedFeature:M.MANAGE_BUDGETS},a.createElement(u,{id:"Budgets.Add"}))}},options:{filtering:!1,rowStyle:function(e){return{backgroundColor:e.parentId?"#f7f7f7":void 0}},sorting:!1,paging:!1,exportButton:!1,columnsButton:!1,search:!1,maxBodyHeight:null,draggable:!1,summary:!0}}))};t.exportDefault(N)}

