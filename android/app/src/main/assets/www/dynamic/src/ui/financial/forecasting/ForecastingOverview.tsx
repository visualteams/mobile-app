function module(e,t,n){var a,i,o,l,s,r,c,u,d,f,p,m,E,D,g,b,v,x,h,k,M,S,A,R,_,y,C;n.link("@babel/runtime/helpers/objectSpread2",{default:function(e){a=e}},0),n.link("@babel/runtime/helpers/slicedToArray",{default:function(e){i=e}},1),n.link("react",{default:function(e){o=e},useEffect:function(e){l=e},useState:function(e){s=e}},0),n.link("react-meteor-hooks",{useMethod:function(e){r=e}},1),n.link("moment",{default:function(e){c=e}},2),n.link("meteor/react-meteor-data",{useTracker:function(e){u=e}},3),n.link("meteor/meteor",{Meteor:function(e){d=e}},4),n.link("react-intl",{useIntl:function(e){f=e}},5),n.link("./ForecastingResume",{default:function(e){p=e}},6),n.link("./ExpenseCategoryCharts",{default:function(e){m=e}},7),n.link("../../components/MainLoader",{default:function(e){E=e}},8),n.link("../../../lib/getAllUsersInTeam",{default:function(e){D=e}},9),n.link("../../../lib/hooks/useDatePredefined",{default:function(e){g=e}},10),n.link("../../../lib/financial/getWorkerAmountReportStat",{default:function(e){b=e}},11),n.link("../../../db/financial/documents/collection",{default:function(e){v=e}},12),n.link("../../../constants/FINANCES",{EnumChoice:function(e){x=e},EnumDocument:function(e){h=e}},13),n.link("../../../lib/financial/getCalcForcasting",{default:function(e){k=e},NOMBRE_JOUR_VENDU_PAR_MOIS:function(e){M=e},NOMBRE_MOIS_MAX:function(e){S=e}},14),n.link("../../components/TableStat/DateStat",{default:function(e){A=e}},15),n.link("../../components/TabbarPage",{default:function(e){R=e}},16),n.link("../../../db/financial/expenseCategory",{default:function(e){_=e}},17),n.link("../../../db/financial/expensePrevision",{default:function(e){y=e}},18),n.link("../../../db/financial/accountingCode/collection",{default:function(e){C=e}},19);var I=function(){var e,t,n,I=f().formatMessage,O=g("exercice"),T=O.dateStartInit,N=O.dateEndInit,U=s(T),F=i(U,2),P=F[0],B=F[1],j=s(N),L=i(j,2),w=L[0],V=L[1],J=s({}),H=i(J,2),X=H[0],$=H[1],W=s({}),q=i(W,2),z=q[0],G=q[1],K=P.format("X"),Q=P.toDate(),Y=w.toDate(),Z=c.utc().isAfter(c.utc(Q))?c.utc().toDate():Q,ee=u((function(){return y.find({startDate:Q}).fetch()}),[]),te=u((function(){return _.find().fetch()}),[]),ne=u((function(){return C.find().fetch()}),[]),ae=u((function(){return v.find({documentDate:{$gte:Q,$lte:Y}}).fetch()}),[]),ie=r("teams.reports.statsByDate"),oe=r("teams.reports.statsByDate"),le=u((function(){return D({isInProduction:!0})}),[]),se="prevision";if(l((function(){oe.call({startDate:Q,endDate:Y,projectIds:null,choice:x.INVOICE_AND_PRODUCT_FORCAST,onlyProjectValidated:!0,keyStat:se}),ie.call({startDate:Q,endDate:Y,projectIds:null,choice:x.INVOICE_AND_PRODUCT_FORCAST,keyStat:se})}),[K]),l((function(){le.forEach((function(e){d.promise("teams.planning.daysAvailableByUser",{userId:e._id,startDate:Z,endDate:Y}).then((function(t){$((function(n){var i;return a(a({},n),{},((i={})[e._id]=t,i))}))})),d.promise("teams.planning.nbHolidaysAvailable",{userId:e._id,endDate:Y,startDate:Q}).then((function(t){G((function(n){var i;return a(a({},n),{},((i={})[e._id]=t,i))}))}))}))}),[le,K]),oe.isLoading||ie.isLoading||!oe.data||!oe.data)return o.createElement(E,null);var re=ae.filter((function(e){return e.documentType===h.SALE})),ce=b(null===(e=ie.data)||void 0===e?void 0:e.entriesStat,se,re),ue=b(null===(t=oe.data)||void 0===t?void 0:t.entriesStat,se,re),de=re.reduce((function(e,t){var n;return e+parseFloat(null!==(n=t.preTaxAmount)&&void 0!==n?n:t.amount)}),0),fe=ue,pe=ce,me=c().subtract(1,"month").endOf("month"),Ee=k({expensesDone:ae.filter((function(e){return c(e.documentDate).isBefore(me)&&e.documentType===h.PURCHASE})),getListAccountingCode:ne,categories:te,availDevs:X,usedHolidays:z,developpers:le,startDate:Q,startDateCalculate:Z,endMonthExpensesReal:me,endDatePrevision:Y,expensePrevision:ee,formatMessage:I}),De=Ee.calcCategories,ge=Ee.TJMwithoutAjust,be=Ee.totalExpenseReal,ve=Ee.totalExpensesForcastingTimeReal,xe=Ee.totalExpensesForcastingNextMonth,he=Ee.totalExpensesBudgetAllocated,ke=Ee.totalDaysAvailable,Me=Ee.totalExpensesUnplanned,Se=Ee.nbMoisRestant,Ae=Ee.expensesUnplanned,Re=Ee.totalExpenseLast3Month,_e=Ee.numberMonthStartExercice;return o.createElement("div",null,o.createElement("div",{style:{display:"flex",width:"100%",justifyContent:"space-between"}},o.createElement(A,{dateEndInit:N,dateStartInit:T,dateStart:P,setDateStart:B,dateEnd:w,setDateEnd:V,duration:"exercice",rangeDisabled:!0})),o.createElement(R,{pages:[{label:I({id:"ForecastingOverview.resume"}),content:o.createElement(p,{TJMwithoutAjust:ge,totalExpenses:be,totalExpensesForcastingTimeReal:ve,totalExpensesForcastingNextMonth:xe,totalExpensesBudgetAllocated:he,totalDaysAvailable:ke,developpers:le,nbMoisRestant:Se,totalExpensesUnplanned:Me,expensesUnplanned:Ae,endMonthExpensesReal:me,NOMBRE_MOIS_MAX:S,NOMBRE_JOUR_VENDU_PAR_MOIS:M,totalCA:de,amountSalesValidated:fe,amountSalesStandBy:pe,totalExpenseLast3Month:Re,numberMonthStartExercice:_e})},{label:I({id:"ForecastingOverview.budgets"}),content:o.createElement(m,{startDate:Q,calcCategories:De})}]}))};n.exportDefault(I)}

