function module(e,n,t){var r,i,a,o,u,l,c,s,m,d,f,p,E,A;t.link("@babel/runtime/helpers/objectSpread2",{default:function(e){r=e}},0),t.link("@babel/runtime/regenerator",{default:function(e){i=e}},1),t.link("react",{default:function(e){a=e}},0),t.link("moment",{default:function(e){o=e}},1),t.link("uniforms-material",{AutoField:function(e){u=e},AutoForm:function(e){l=e},ErrorsField:function(e){c=e}},2),t.link("react-intl",{FormattedMessage:function(e){s=e},useIntl:function(e){m=e}},3),t.link("meteor/meteor",{Meteor:function(e){d=e}},4),t.link("../components/AddForm",{default:function(e){f=e}},5),t.link("../../constants/FINANCES",{EnumFrequencyBudget:function(e){p=e}},6),t.link("uniforms-bridge-simple-schema-2",{SimpleSchema2Bridge:function(e){E=e}},7),t.link("../../db/financial/expenseCategory/schema",{default:function(e){A=e}},8);var x={amount:0,frequency:p.MONTHLY},y=function(e){var n=e.model,t=e.onClose,y=e.startDate,b,g=m().formatMessage,F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.find((function(e){return o.utc(e.startDate).isSame(o.utc(y))}))||x},h=n?F(n.limits):x,k=A.extend({amount:Number,frequency:{type:String,uniforms:{options:[{value:p.MONTHLY,label:g({id:"ListExpenseCategories.frequency.monthly"})},{value:p.ANNUAL,label:g({id:"ListExpenseCategories.frequency.annual"})}]}}}),C=function(){function e(e){var r;return i.async(function(){function a(a){for(;;)switch(a.prev=a.next){case 0:if((r=JSON.parse(JSON.stringify(n))).name=e.name,r.limits||(r.limits=[]),r.limits=r.limits.filter((function(e){return!o.utc(e.startDate).isSame(o.utc(y))})),r.limits.push({amount:e.amount,frequency:e.frequency,startDate:y,endDate:y}),!n||!n._id){a.next=10;break}return a.next=8,i.awrap(d.promise("expensesCategories.update",{_id:n._id},r).then((function(){Alert.success(g({id:"AddFormExpense.success"})),t()})).catch((function(e){return Alert.error(g({id:"AddFormExpense.error"})+e)})));case 8:a.next=12;break;case 10:return a.next=12,i.awrap(d.promise("expensesCategories.create",r).then((function(){Alert.success(g({id:"AddFormExpense.add"})),t()})).catch((function(e){return Alert.error(g({id:"AddFormExpense.error"})+e)})));case 12:case"end":return a.stop()}}return a}(),null,null,null,Promise)}return e}(),q=a.createElement(l,{schema:new E(k),model:r(r({},n),{},{amount:h.amount,frequency:null==h?void 0:h.frequency})},a.createElement(u,{name:"name",label:a.createElement(s,{id:"AddFormExpenseCategory.Name"})}),a.createElement(u,{name:"amount",label:a.createElement(s,{id:"AddFormExpenseCategory.Amount"})}),a.createElement(u,{name:"frequency",label:a.createElement(s,{id:"AddFormExpenseCategory.Frequency"})}),a.createElement(c,null));return a.createElement(f,{onSubmit:C,onClose:t,form:q,buttonConfirmLabel:n._id?g({id:"Actions.Edit"}):g({id:"Actions.Add"}),title:g({id:"AddFormExpenseCategory.title"})})};t.exportDefault(y)}

