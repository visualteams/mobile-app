function module(e,t,n){var i,l,r,a,o,u,c,s,d,m,f,p,k,g,E,T,v,h,I,S,b,y,R,A,C,_,L,F,j;n.link("@babel/runtime/helpers/extends",{default:function(e){i=e}},0),n.link("@babel/runtime/helpers/objectSpread2",{default:function(e){l=e}},1),n.link("@babel/runtime/helpers/slicedToArray",{default:function(e){r=e}},2),n.link("react",{default:function(e){a=e},useState:function(e){o=e}},0),n.link("clsx",{default:function(e){u=e}},1),n.link("react-intl",{FormattedMessage:function(e){c=e},useIntl:function(e){s=e}},2),n.link("@material-ui/core/Tooltip",{default:function(e){d=e}},3),n.link("@material-ui/icons/CheckCircle",{default:function(e){m=e}},4),n.link("@material-ui/core/IconButton",{default:function(e){f=e}},5),n.link("@material-ui/icons/Edit",{default:function(e){p=e}},6),n.link("@material-ui/icons/Delete",{default:function(e){k=e}},7),n.link("../../../lib/time",{secondsToHms:function(e){g=e}},8),n.link("../../../db/crm/taskstatus",{default:function(e){E=e}},9),n.link("../../components/Progress",{default:function(e){T=e}},10),n.link("../../components/TaskStatusSelector",{default:function(e){v=e}},11),n.link("../../components/Button",{default:function(e){h=e}},12),n.link("../../components/crm/MaterialTable",{default:function(e){I=e}},13),n.link("./withTasks",{default:function(e){S=e}},14),n.link("@material-ui/core",{makeStyles:function(e){b=e}},15),n.link("@visualteams/ui-kit/colors",{default:function(e){y=e}},16),n.link("../../components/crm/ChipTaskTag",{default:function(e){R=e}},17),n.link("../../../lib/table/alterColumns",{default:function(e){A=e}},18),n.link("../../components/FilterColumns",{default:function(e){C=e}},19),n.link("@material-ui/icons/FilterList",{default:function(e){_=e}},20),n.link("../../components/crm/FilterSelectTaskTags",{default:function(e){L=e}},21),n.link("../../../db/crm/taskTags",{default:function(e){F=e}},22),n.link("../../../constants/ROLES",{ROLES:function(e){j=e}},23);var x=b({id:{fontWeight:600,color:y.grey}}),z=function(e){var t=e.projectId,n=e.tasksStatus,S=e.tasks,b=e.onEdit,y=e.onDelete,z=e.onAdd,B=e.loading,D=o(!1),M=r(D,2),O=M[0],H=M[1],P=o(["tags"]),w=r(P,2),N=w[0],G=w[1],K,W=s().formatMessage,q=x(),J=S.map((function(e){var t=a.createElement("div",{dangerouslySetInnerHTML:{__html:e.message}}),n=!!e.detailReport&&e.detailReport.length>0&&a.createElement("div",{key:"hoursReport"+e._id},a.createElement("ul",null,e.detailReport.map((function(e){return e.dateReport.map((function(e,t){return a.createElement("li",{key:"dateReport"+t},e)}))}))),a.createElement("div",null,"Total :",g(e.reportedTime)));return l(l({},e),{},{hoursReport:n,description:e.description?e.description:"",descriptionList:e.message?a.createElement("div",null,a.createElement(d,{title:t,placement:"top"},a.createElement("div",null,e.description))):e.description})})),Q=E.find({isTerminateStatus:!0}).fetch().map((function(e){return e._id})),U=[{title:"Description",field:"descriptionList",sorting:!0,filtering:!0,customFilterAndSearch:function(e,t){if(String(t.humanId)===e||t.descriptionList.includes(e))return t},customSort:function(e,t){return e.humanId<t.humanId?-1:t.humanId>t.humanId?1:0},render:function(e){return a.createElement("div",null,a.createElement("div",null,a.createElement("span",{className:q.id},"#",e.humanId)," ",e.descriptionList))}},{title:W({id:"SelectTaskTags.Tags"}),field:"tags",filterComponent:function(e){return a.createElement(L,i({projectId:t},e))},customFilterAndSearch:function(e,t){if(0===e.length)return!0;var n=!1;return e.forEach((function(e){var i;!1===n&&(n=null===(i=t.tagsId)||void 0===i?void 0:i.includes(e))})),n},customSort:function(e,t){var n,i;if(null===(n=e.tagsId)||void 0===n||!n[0]||null===(i=t.tagsId)||void 0===i||!i[0])return 0;var l=F.findOne(e.tagsId[0]),r=F.findOne(t.tagsId[0]);return l.name<r.name?-1:r.name>l.name?1:0},render:function(e){var t;return a.createElement("div",null,null===(t=e.tagsId)||void 0===t?void 0:t.map((function(e){return a.createElement(R,{key:e,taskTagId:e})})))}},{title:W({id:"Task.Time_Reported"}),field:"reportedTime",render:function(e){var t=e.estimatedTime>0?100*e.reportedTime/e.estimatedTime:0;return a.createElement("div",null,a.createElement(d,{title:e.hoursReport,placement:"top",className:u([e.hoursReport&&"have-tooltip"]),disableHoverListener:!e.hoursReport},a.createElement("span",null,g(e.reportedTime))),a.createElement("span",{style:{fontSize:12,color:"#929292"}}," ",a.createElement(c,{id:"Task.of"})," ",g(e.estimatedTime)),a.createElement(T,{style:{marginTop:4},value:t}))},sorting:!0,filtering:!1},{title:W({id:"Task.Time_to_plan"}),field:"estimatedTime",render:function(e){var t=e.estimatedTime-e.reportedTime;return Q.includes(e.taskstatusId)?a.createElement(m,null):a.createElement("div",null,a.createElement("span",{style:{color:t>e.timePlanned?"red":"green"}},t>0?g(t):"?"),a.createElement("br",null),a.createElement("span",{style:{fontSize:12,color:"#929292"}},a.createElement(c,{id:"Task.of_which"})," ",a.createElement("b",null,g(e.timePlanned))," ",a.createElement(c,{id:"Task.planned"})))},filtering:!1,sorting:!0,canTotal:!0},{title:W({id:"Task.TaskStatus"}),field:"taskstatusId",sorting:!0,lookup:n.reduce((function(e,t){return e[t._id]=t.name,e}),{}),render:function(e){var n=e.taskstatusId,i=e._id;return a.createElement(v,{projectId:t,taskStatusId:n,taskId:i})}},{title:W({id:"Table.Actions"}),field:"",align:"right",sorting:!1,render:function(e){return a.createElement("div",null,a.createElement(f,{style:{cursor:"pointer"},onClick:function(){return b(e)}},a.createElement(p,null)),a.createElement(f,{style:{cursor:"pointer"},onClick:function(){return y(e)}},a.createElement(k,{color:"error"})))}}];return a.createElement(I,{title:W({id:"ProjectOverview.Tasks"}),columns:A(U,N),data:J,loading:B,components:{Actions:function(){return a.createElement("div",null,a.createElement(C,{style:{marginRight:16,marginLeft:16},columns:A(U,N),onColumnsChanged:G}),a.createElement(h,{id:"button-filter-project",onClick:function(){return H(!O)},size:"small",color:O?"secondary":"default",variant:"outlined",style:{marginRight:16}},a.createElement(_,{fontSize:"small"}),a.createElement(c,{id:"Actions.Filtrer"})),a.createElement(h,{size:"large",onClick:function(){return z()},"data-testid":"button-add",restrictedFeature:j.MANAGE_TASK},a.createElement(c,{id:"Tasks.Add"})))}},options:{exportButton:!0,exportAllData:!0,maxBodyHeight:null,columnsButton:!1,filtering:O,padding:"dense"}})};n.exportDefault(S(z))}

