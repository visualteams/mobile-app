function module(e,t,s){var r,i,n,a,l,o,d,c,E,m,A,u,f,S,p,M;s.link("@babel/runtime/helpers/toConsumableArray",{default:function(e){r=e}},0),s.link("@babel/runtime/regenerator",{default:function(e){i=e}},1),s.link("react",{default:function(e){n=e}},0),s.link("uniforms-material",{AutoField:function(e){a=e},AutoForm:function(e){l=e}},1),s.link("react-intl",{FormattedMessage:function(e){o=e},useIntl:function(e){d=e}},2),s.link("meteor/meteor",{Meteor:function(e){c=e}},3),s.link("react-toastify",{toast:function(e){E=e}},4),s.link("uniforms-bridge-simple-schema-2",{SimpleSchema2Bridge:function(e){m=e}},5),s.link("../components/AddForm",{default:function(e){A=e}},6),s.link("../../db/groupsPermissions/schema",{default:function(e){u=e}},7),s.link("@material-ui/core",{Switch:function(e){f=e}},8),s.link("../../constants/ROLES",{ROLES:function(e){S=e}},9),s.link("uniforms",{useForm:function(e){p=e}},10),s.link("@visualteams/ui-kit/colors",{default:function(e){M=e}},11);var R=function(e){var t=e.onClose,s=e.model,r,f=d().formatMessage;s.permissions||(s.permissions=[]),s.protected||(s.protected=!1);var p=function(){function e(e){return i.async(function(){function r(r){for(;;)switch(r.prev=r.next){case 0:if(!s.protected){r.next=3;break}return E.error(f({id:"AddFormPermissions.protected",defaultMessage:"Ce groupe de permissions ne peut pas être modifié."})),r.abrupt("return");case 3:if(r.prev=3,s._id){r.next=9;break}return r.next=7,i.awrap(c.promise("groupsPermissions.create",e));case 7:r.next=11;break;case 9:return r.next=11,i.awrap(c.promise("groupsPermissions.update",s._id,e));case 11:t(),E.success(f({id:"success"})),r.next=19;break;case 15:r.prev=15,r.t0=r.catch(3),console.error(r.t0),E.error(f({id:"error"}));case 19:case"end":return r.stop()}}return r}(),null,null,[[3,15]],Promise)}return e}(),M=n.createElement(l,{schema:new m(u.omit("_id","createdBy","updatedAt","createdAt")),model:s},n.createElement(a,{name:"name",disabled:s.protected,label:n.createElement(o,{id:"AddFormPermissions.Name",defaultMessage:"Nom du groupe de permission"})}),n.createElement(a,{name:"type",disabled:s.protected,label:n.createElement(o,{id:"AddFormPermissions.Type",defaultMessage:"Type d'utilisateur"})}),n.createElement(g,{title:n.createElement(o,{id:"AddFormPermissions.CategoryProject",defaultMessage:"Dans la partie projets"})},n.createElement(_,{role:S.LIST_PROJECTS,description:n.createElement(o,{id:"Roles.LIST_PROJECTS",defaultMessage:"Voir les projets"})}),n.createElement(_,{role:S.MANAGE_PROJECT,description:n.createElement(o,{id:"Roles.MANAGE_PROJECT",defaultMessage:"Modifier les projets"})}),n.createElement(_,{role:S.ACCESS_RESUME_PROJECT,description:n.createElement(o,{id:"Roles.ACCESS_RESUME_PROJECT",defaultMessage:"Accès au résumé statistique"})}),n.createElement(_,{role:S.READ_TASK,description:n.createElement(o,{id:"Roles.READ_TASK",defaultMessage:"Voir les tâches des projets"})}),n.createElement(_,{role:S.MANAGE_TASK,description:n.createElement(o,{id:"Roles.MANAGE_TASK",defaultMessage:"Modifier les tâches des projets"})}),n.createElement(_,{role:S.ACCESS_PROJECT_STATS,description:n.createElement(o,{id:"Roles.ACCESS_PROJECT_STATS",defaultMessage:"Accès aux statistiques"})})),n.createElement(g,{title:n.createElement(o,{id:"AddFormPermissions.CategoryCustomers",defaultMessage:"Dans la partie clients"})},n.createElement(_,{role:S.READ_CUSTOMERS,description:n.createElement(o,{id:"Roles.READ_CUSTOMERS",defaultMessage:"Voir les clients"})}),n.createElement(_,{role:S.MANAGE_CUSTOMER,description:n.createElement(o,{id:"Roles.MANAGE_CUSTOMER",defaultMessage:"Modifier les clients"})}),n.createElement(_,{role:S.ACCESS_CUSTOMERS_STATS,description:n.createElement(o,{id:"Roles.ACCESS_CUSTOMERS_STATS",defaultMessage:"Accès aux statistiques"})})),n.createElement(g,{title:n.createElement(o,{id:"AddFormPermissions.CategorySettings",defaultMessage:"Dans la partie paramètres"})},n.createElement(_,{role:S.MANAGE_SETTINGS,description:n.createElement(o,{id:"Roles.MANAGE_SETTINGS",defaultMessage:"Modifier les paramètres"})}),n.createElement(_,{role:S.MANAGE_PERMISSIONS,description:n.createElement(o,{id:"Roles.MANAGE_PERMISSIONS",defaultMessage:"Modifier les permissions"})}),n.createElement(_,{role:S.MANAGE_PLUGINS,description:n.createElement(o,{id:"Roles.MANAGE_PLUGINS",defaultMessage:"Installer des plugins"})}),n.createElement(_,{role:S.MANAGE_USERS,description:n.createElement(o,{id:"Roles.MANAGE_USERS",defaultMessage:"Ajouter/Modifier les utilisateurs"})}),n.createElement(_,{role:S.MANAGE_ORGANISATION,description:n.createElement(o,{id:"Roles.MANAGE_ORGANISATION",defaultMessage:"Modifier l'organisation et son abonnement"})})),n.createElement(g,{title:n.createElement(o,{id:"AddFormPermissions.CategoryReports",defaultMessage:"Dans la partie rapports"})},n.createElement(_,{role:S.READ_REPORTS,description:n.createElement(o,{id:"Roles.READ_REPORTS",defaultMessage:"Voir les comptes rendus"})}),n.createElement(_,{role:S.ACCESS_REPORT_STATS_TIME,description:n.createElement(o,{id:"Roles.ACCESS_REPORT_STATS_TIME",defaultMessage:"Voir les statistiques de temps"})}),n.createElement(_,{role:S.ACCESS_REPORT_STATS_FINANCIAL,description:n.createElement(o,{id:"Roles.ACCESS_REPORT_STATS_FINANCIAL",defaultMessage:"Voir les statistiques financières"})})),n.createElement(g,{title:n.createElement(o,{id:"AddFormPermissions.CategoryVisio",defaultMessage:"Dans la partie visioconférence"})},n.createElement(_,{role:S.READ_VISIO,description:n.createElement(o,{id:"Roles.READ_VISIO",defaultMessage:"Voir les visioconférences"})}),n.createElement(_,{role:S.READ_REPLAY,description:n.createElement(o,{id:"Roles.READ_REPLAY",defaultMessage:"Revoir les enregistrements de visioconférence"})}),n.createElement(_,{role:S.MANAGE_VISIO,description:n.createElement(o,{id:"Roles.MANAGE_VISIO",defaultMessage:"Modifier les visio conférences"})}),n.createElement(_,{role:S.ACCESS_ROOMS,description:n.createElement(o,{id:"Roles.ACCESS_ROOMS",defaultMessage:"Accéder aux salles internes"})})),n.createElement(g,{title:n.createElement(o,{id:"AddFormPermissions.CategoryChat",defaultMessage:"Dans la partie messagerie"})},n.createElement(_,{role:S.ACCESS_CHAT,description:n.createElement(o,{id:"Roles.ACCESS_CHAT",defaultMessage:"Accéder à la messagerie"})}),n.createElement(_,{role:S.MANAGE_CHANNELS,description:n.createElement(o,{id:"Roles.MANAGE_CHANNELS",defaultMessage:"Modifier les canaux"})})),n.createElement(g,{title:n.createElement(o,{id:"AddFormPermissions.CategoryPlanning",defaultMessage:"Dans la partie planning"})},n.createElement(_,{role:S.READ_GOALS,description:n.createElement(o,{id:"Roles.READ_GOALS",defaultMessage:"Voir les planifications"})}),n.createElement(_,{role:S.MANAGE_GOALS,description:n.createElement(o,{id:"Roles.MANAGE_GOALS",defaultMessage:"Ajouter/Modifier des planifications"})}),n.createElement(_,{role:S.MANAGE_REPORTS,description:n.createElement(o,{id:"Roles.MANAGE_REPORTS",defaultMessage:"Ajouter/Modifier des comptes rendus"})})),n.createElement(g,{title:n.createElement(o,{id:"AddFormPermissions.CategoryWiki",defaultMessage:"Dans la partie connaissance"})},n.createElement(_,{role:S.READ_WIKI,description:n.createElement(o,{id:"Roles.READ_WIKI",defaultMessage:"Voir les connaissances"})}),n.createElement(_,{role:S.MANAGE_WIKI,description:n.createElement(o,{id:"Roles.MANAGE_WIKI",defaultMessage:"Ajouter/Modifier des connaissances"})})),n.createElement(g,{title:n.createElement(o,{id:"AddFormPermissions.CategoryFinance",defaultMessage:"Dans la partie finance"})},n.createElement(_,{role:S.READ_CASHFLOW,description:n.createElement(o,{id:"Roles.READ_CASHFLOW",defaultMessage:"Voir la trésorerie"})}),n.createElement(_,{role:S.READ_BUDGETS,description:n.createElement(o,{id:"Roles.READ_BUDGETS",defaultMessage:"Voir les budgets"})}),n.createElement(_,{role:S.MANAGE_BUDGETS,description:n.createElement(o,{id:"Roles.MANAGE_BUDGETS",defaultMessage:"Ajouter/Modifier des budgets"})}),n.createElement(_,{role:S.READ_OPERATIONS,description:n.createElement(o,{id:"Roles.READ_OPERATIONS",defaultMessage:"Voir les opérations"})}),n.createElement(_,{role:S.MANAGE_OPERATIONS,description:n.createElement(o,{id:"Roles.MANAGE_OPERATIONS",defaultMessage:"Ajouter/Modifier des opérations"})})));return n.createElement(A,{maxWidth:"lg",form:M,onSubmit:p,onClose:t,buttonConfirmLabel:s._id?f({id:"Actions.Edit"}):f({id:"Actions.Add"}),title:f({id:"AddFormPermissions.title",defaultMessage:"Attribuer des permissions"})})},g=function(e){var t=e.children,s=e.title;return n.createElement("div",null,n.createElement("div",{style:{width:"100%",background:M.totalLine,padding:8,fontWeight:600,marginTop:16}},s),t)},_=function(e){var t,s=e.role,i=e.description,a=p(),l=a.model,d=a.onChange,c=function(){var e,t=r(null==l?void 0:l.permissions);null!=l&&null!==(e=l.permissions)&&void 0!==e&&e.includes(s)?t.splice(t.indexOf(s),1):t.push(s),d("permissions",t)};return n.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center"}},n.createElement("div",null,i||s),n.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"}},n.createElement(o,{id:"No",defaultMessage:"Non"}),n.createElement(f,{checked:!(null==l||null===(t=l.permissions)||void 0===t||!t.includes(s)),onChange:c,disabled:l.protected}),n.createElement(o,{id:"Yes",defaultMessage:"Oui"})))};s.exportDefault(R)}

