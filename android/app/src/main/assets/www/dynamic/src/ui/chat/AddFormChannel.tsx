function module(e,n,t){var r,i,l,o,a,u,c,s,d,m,f,h,p;t.link("@babel/runtime/helpers/objectSpread2",{default:function(e){r=e}},0),t.link("@babel/runtime/helpers/toConsumableArray",{default:function(e){i=e}},1),t.link("react",{default:function(e){l=e}},0),t.link("uniforms-material",{AutoField:function(e){o=e},AutoForm:function(e){a=e},HiddenField:function(e){u=e}},1),t.link("react-intl",{useIntl:function(e){c=e}},2),t.link("meteor/meteor",{Meteor:function(e){s=e}},3),t.link("react-toastify",{toast:function(e){d=e}},4),t.link("../components/AddForm",{default:function(e){m=e}},5),t.link("../../db/crm/channels/schema",{default:function(e){f=e}},6),t.link("../../db/crm/channels",{default:function(e){h=e}},7),t.link("uniforms-bridge-simple-schema-2",{SimpleSchema2Bridge:function(e){p=e}},8);var b=function(e){var n=e.onClose,t=e.type,b,k=c().formatMessage,I=function(e){var t=[s.userId()].concat(i(e.usersId));s.promise("channels.create",r(r({},e),{},{usersId:t})).then((function(){n(),d.success(k({id:"success"}))})).catch((function(e){console.error(e),d.error(k({id:"error"}))}))},g=i(new Set(h.find({type:"direct"}).fetch().filter((function(e){return 2===e.usersId.length})).map((function(e){return e.usersId})).flat())),A=l.createElement(a,{schema:new p(f)},"group"===t?l.createElement(o,{label:k({id:"AddFormChannel.name"}),name:"name"}):l.createElement(u,{name:"name",value:"direct-message"}),l.createElement(o,{label:k({id:"AddFormChannel.users"}),name:"usersId",multiple:!0,excludeIds:"group"===t?[]:[s.userId()].concat(i(g))}),l.createElement(u,{name:"type",value:t}));return l.createElement(m,{form:A,onSubmit:I,onClose:n,title:k("group"===t?{id:"AddFormChannel.titleGroup"}:{id:"AddFormChannel.titleDirect"})})};t.exportDefault(b)}

