function module(e,t,n){var r,i,l,u,s,a,o,c,d,m,f,E,p,k,g,b,v,I,U,h,y,L,A,S,C,x,F,P,z;n.link("@babel/runtime/regenerator",{default:function(e){r=e}},0),n.link("@babel/runtime/helpers/objectSpread2",{default:function(e){i=e}},1),n.link("@babel/runtime/helpers/slicedToArray",{default:function(e){l=e}},2),n.link("react",{default:function(e){u=e},useState:function(e){s=e}},0),n.link("material-ui-confirm",{useConfirm:function(e){a=e}},1),n.link("meteor/react-meteor-data",{useTracker:function(e){o=e}},2),n.link("react-intl",{FormattedMessage:function(e){c=e},useIntl:function(e){d=e}},3),n.link("react-toastify",{toast:function(e){m=e}},4),n.link("meteor/meteor",{Meteor:function(e){f=e}},5),n.link("@material-ui/icons/Delete",{default:function(e){E=e}},6),n.link("@material-ui/icons/Replay",{default:function(e){p=e}},7),n.link("@material-ui/core/IconButton",{default:function(e){k=e}},8),n.link("@material-ui/icons/Edit",{default:function(e){g=e}},9),n.link("@material-ui/icons/FilterList",{default:function(e){b=e}},10),n.link("@material-ui/lab/Alert",{default:function(e){v=e}},11),n.link("../../../lib/users/getUsername",{default:function(e){I=e}},12),n.link("../../../db/teams/teamsAssociations",{default:function(e){U=e}},13),n.link("../../components/crm/MaterialTable",{default:function(e){h=e}},14),n.link("../../components/Button",{default:function(e){y=e}},15),n.link("../../components/InviteFormUser",{default:function(e){L=e}},16),n.link("@visualteams/ui-kit/colors",{default:function(e){A=e}},17),n.link("../../components/MemberStatusDisplayer",{default:function(e){S=e}},18),n.link("../../../lib/users/haveSub",{default:function(e){C=e}},19),n.link("../../globalTeamId",{globalTeamId:function(e){x=e}},20),n.link("../../../db/teams/teams",{default:function(e){F=e}},21),n.link("../../../db/groupsPermissions",{default:function(e){P=e}},22),n.link("@material-ui/core/Tooltip",{default:function(e){z=e}},23);var T=function(){var e=s(null),t=l(e,2),n=t[0],T=t[1],M=s(!1),w=l(M,2),B=w[0],D=w[1],O=s(!1),R=l(O,2),j=R[0],N=R[1],$,G=d().formatMessage,Q=a(),q=function(){function e(e){return r.async(function(){function t(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.awrap(Q());case 2:f.promise("admin.users.delete",e).then((function(){return m.success(G({id:"success"}))})).catch((function(){return m.error(G({id:"error"}))}));case 3:case"end":return t.stop()}}return t}(),null,null,null,Promise)}return e}(),H=function(){function e(e){return r.async(function(){function t(t){for(;;)switch(t.prev=t.next){case 0:f.promise("admin.users.invite",e).then((function(){return m.success(G({id:"success"}))})).catch((function(){return m.error(G({id:"error"}))}));case 1:case"end":return t.stop()}}return t}(),null,null,null,Promise)}return e}(),J=o((function(){return U.find({status:{$nin:["revoked"]},deletedAt:{$exists:!1}}).fetch()}),[]),K=[{title:G({id:"ListUsers.UserName"}),property:"userId",defaultSort:"asc",customFilterAndSearch:function(e,t){return I(t.userId).toLowerCase().includes(e)},customSort:function(e,t){var n=I(e.userId),r=I(t.userId);return n<r?1:n>r?-1:0},render:function(e){var t=e.userId,n=I(t);return u.createElement("div",{key:t,"data-value":n},n)}},{title:"Email",field:"email",render:function(e){return e.email||f.users.findOne(e.userId).emails[0].address}},{title:"Status",field:"status",render:function(e){return u.createElement(S,{status:e.status})}},{title:"Permissions",field:"groupPermissionId",render:function(e){return P.findOne(e.groupPermissionId).name}},{title:"Actions",field:"actions",sorting:!1,align:"right"}],V=[{title:G({id:"ListUsers.UserName"}),field:"userId",defaultSort:"asc",customFilterAndSearch:function(e,t){return I(t.userId).toLowerCase().includes(e)},customSort:function(e,t){var n=I(e.userId),r=I(t.userId);return n<r?1:n>r?-1:0},render:function(e){var t=e.userId,n=I(t);return u.createElement("div",{key:t,"data-value":n},n)}},{title:"Email",field:"email"},{title:"Status",field:"status"},{title:"Permissions",field:"groupPermissionId",render:function(e){return P.findOne(e.groupPermissionId).name}}],W=function(e){return"refused"===(null==e?void 0:e.status)},X=function(e){var t=f.userId()===e.userId;return u.createElement("div",null,u.createElement(z,{title:G({id:"Actions.Edit"})},u.createElement(k,{onClick:function(){return T(e)},size:"small"},u.createElement(g,null))),u.createElement(z,{title:G({id:"ListUsers.DeleteUser"})},u.createElement("span",null,u.createElement(k,{style:{color:t?void 0:A.danger},disabled:t,onClick:function(){return q(e.userId)},size:"small"},u.createElement(E,null)))),W(e)&&u.createElement(z,{title:G({id:"ListUsers.ResendInvitation"})},u.createElement(k,{size:"small",onClick:function(){return H(e)}},u.createElement(p,null))))},Y=o((function(){return F.findOne(x.get())}),[]),Z=!1;return(!C("standard")&&J.length>=3||J.length>=Y.maxUsers)&&(Z=!0),u.createElement(u.Fragment,null,n&&u.createElement(L,{model:n,onClose:function(){return T(null)}}),u.createElement(h,{title:G({id:"ListUsers.Users"}),columns:K,data:J.filter((function(e){return!e.customerContactId})).map((function(e){return i(i({},e),{},{actions:X(e)})})),options:{search:!1,columnsButton:!1,filtering:B,padding:"dense"},components:{Actions:function(){return u.createElement("div",{style:{textAlign:"right",paddingTop:16}},u.createElement("span",{style:{marginRight:16}},J.length,"/",Y.maxUsers," ",u.createElement(c,{id:"ListUsers.collaborators"})),u.createElement(y,{id:"button-filter-guest",onClick:function(){return D(!B)},size:"small",color:B?"secondary":"default",variant:"outlined",style:{marginRight:16}},u.createElement(b,{fontSize:"small"}),u.createElement(c,{id:"Actions.Filtrer"})),u.createElement(y,{id:"button-add-project",onClick:function(){return T({})},size:"large",blockedFeature:Z,placement:"left",typeButtonUpgrade:"account",titleUpgrade:u.createElement(c,{id:"ListUsers.Invite"}),sentenceUpgrade:u.createElement(c,{id:"ListUsers.ModifyQty"})},u.createElement(c,{id:"ListUsers.Invite"})))}}}),u.createElement("br",null),u.createElement(h,{title:G({id:"ListUsers.Guest"}),columns:V,data:J.filter((function(e){return!!e.customerContactId})),components:{Actions:function(){return u.createElement(y,{id:"button-filter-project",onClick:function(){return N(!j)},size:"small",color:B?"secondary":"default",variant:"outlined"},u.createElement(b,{fontSize:"small"}),u.createElement(c,{id:"Actions.Filtrer"}))},Empty:function(){return u.createElement("div",null,u.createElement("br",null),u.createElement("br",null),u.createElement("br",null),u.createElement("b",null,u.createElement(c,{id:"ListUsers.Empty"})),u.createElement("br",null),u.createElement("br",null),u.createElement("br",null),u.createElement(v,{severity:"info"},u.createElement(c,{id:"ListUsers.TipsAddExternal"})),u.createElement("br",null))}},options:{search:!1,columnsButton:!1,filtering:j}}))};n.exportDefault(T)}

